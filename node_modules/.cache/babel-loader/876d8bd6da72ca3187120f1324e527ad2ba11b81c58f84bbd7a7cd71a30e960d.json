{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  const _component_v_app_bar = _resolveComponent(\"v-app-bar\");\n  return _openBlock(), _createBlock(_component_v_app_bar, {\n    app: \"\",\n    dark: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_container, null, {\n      default: _withCtx(() => [_createVNode(_component_v_row, {\n        align: \"center\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_col, {\n          class: \"d-flex justify-start\"\n        }, {\n          default: _withCtx(() => [$data.userRole === 'ADMIN' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_v_btn, {\n            to: {\n              path: '/member/list'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"회원관리\")]),\n            _: 1\n          }), _createVNode(_component_v_btn, {\n            to: {\n              path: '/product/manage'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"상품관리\")]),\n            _: 1\n          }), _createVNode(_component_v_btn, {\n            href: \"/order/list\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"실시간주문(\" + _toDisplayString($data.liveQuantity) + \")\", 1)]),\n            _: 1\n          })])) : _createCommentVNode(\"\", true)]),\n          _: 1\n        }), _createVNode(_component_v_col, {\n          class: \"text-center\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_v_btn, {\n            to: {\n              path: '/'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"java shop\")]),\n            _: 1\n          })]),\n          _: 1\n        }), _createVNode(_component_v_col, {\n          class: \"d-flex justify-end\"\n        }, {\n          default: _withCtx(() => [$data.isLogin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            to: {\n              path: '/order/cart'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"장바구니(\" + _toDisplayString(_ctx.getTotalQuantity) + \")\", 1)]),\n            _: 1\n          })) : _createCommentVNode(\"\", true), _createVNode(_component_v_btn, {\n            to: {\n              path: '/product/list'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"상품목록\")]),\n            _: 1\n          }), $data.isLogin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 1,\n            to: {\n              path: '/mypage'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"마이페이지\")]),\n            _: 1\n          })) : _createCommentVNode(\"\", true), !$data.isLogin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 2,\n            to: {\n              path: '/member/create'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"회원가입\")]),\n            _: 1\n          })) : _createCommentVNode(\"\", true), !$data.isLogin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 3,\n            to: {\n              path: '/login'\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"로그인\")]),\n            _: 1\n          })) : _createCommentVNode(\"\", true), $data.isLogin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 4,\n            onClick: $options.doLogout\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"로그아웃\")]),\n            _: 1\n          }, 8, [\"onClick\"])) : _createCommentVNode(\"\", true)]),\n          _: 1\n        })]),\n        _: 1\n      })]),\n      _: 1\n    })]),\n    _: 1\n  });\n}","map":{"version":3,"names":["key","_createBlock","_component_v_app_bar","app","dark","default","_withCtx","_createVNode","_component_v_container","_component_v_row","align","_component_v_col","class","$data","userRole","_createElementBlock","_hoisted_1","_component_v_btn","to","path","_createTextVNode","_","href","_toDisplayString","liveQuantity","_createCommentVNode","isLogin","_ctx","getTotalQuantity","onClick","$options","doLogout"],"sources":["/Users/wisdom/Documents/GitHub/order-frontend/src/components/HeaderComponent.vue"],"sourcesContent":["<template>\n    <v-app-bar app dark>\n        <v-container>\n            <v-row align=\"center\">\n                <v-col class=\"d-flex justify-start\">\n                    <div v-if=\"userRole === 'ADMIN'\">\n                    <!-- 왼쪽 정렬 -->\n                    <v-btn :to=\"{path:'/member/list'}\">회원관리</v-btn>\n                    <v-btn :to=\"{path:'/product/manage'}\">상품관리</v-btn>\n                    <v-btn href=\"/order/list\">실시간주문({{ liveQuantity }})</v-btn> \n                    </div>\n                </v-col>\n                <v-col class=\"text-center\">\n                    <!-- 가운데 정렬 -->\n                    <v-btn :to=\"{path:'/'}\">java shop</v-btn>\n                </v-col>\n                <v-col class=\"d-flex justify-end\">\n                    <!-- 오른쪽 정렬 -->\n                    <v-btn v-if=\"isLogin\" :to=\"{path:'/order/cart'}\">장바구니({{ getTotalQuantity }})</v-btn>\n                    <v-btn :to=\"{path:'/product/list'}\">상품목록</v-btn>\n                    <v-btn v-if=\"isLogin\" :to=\"{path:'/mypage'}\">마이페이지</v-btn>\n                    <v-btn v-if=\"!isLogin\" :to=\"{path:'/member/create'}\">회원가입</v-btn>\n                    <v-btn v-if=\"!isLogin\" :to=\"{path:'/login'}\">로그인</v-btn>\n                    <v-btn v-if=\"isLogin\" @click=\"doLogout\">로그아웃</v-btn>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-app-bar>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n// 서버와 실시간 알림 서비스를 위한 의존성 추가 필요\nimport {EventSourcePolyfill} from 'event-source-polyfill';\nexport default { \n    data(){\n        return{\n            userRole: null,\n            isLogin: false,\n            liveQuantity: 0 // 실시간 주문 개수\n        }\n    },\n    computed:{\n        ...mapGetters(['getTotalQuantity'])\n    },\n    created(){\n        // 현재 로그인한 사용자가 일반user인지 admin인지 확인하기 위해서 created될때 localStorage\n        const token = localStorage.getItem(\"token\");\n        if(token){\n            this.isLogin = true;\n            this.userRole = localStorage.getItem(\"role\");\n        }\n        if(this.userRole === 'ADMIN'){\n            let sse = new EventSourcePolyfill(`${process.env.VUE_APP_API_BASE_URL}/subscribe`, {headers: {Authorization: `Bearer ${token}`}});\n            sse.addEventListener('connect', (event)=> {\n                console.log(event)\n            })\n            sse.addEventListener('ordered', (event)=> {\n                console.log(event.data)\n                this.liveQuantity ++;\n            })\n            sse.onerror = (error) => {\n                console.log(error);\n                sse.close();\n            }\n        }\n    },\n    methods:{\n        doLogout(){\n            localStorage.clear(); // localStorage에 저장된 토큰, user정보 삭제\n            window.location.reload(); // 재시작\n        }\n    }\n};\n</script>\n"],"mappings":";;EAAAA,GAAA;AAAA;;;;;;;uBACIC,YAAA,CA0BYC,oBAAA;IA1BDC,GAAG,EAAH,EAAG;IAACC,IAAI,EAAJ;;IADnBC,OAAA,EAAAC,QAAA,CAEQ,MAwBc,CAxBdC,YAAA,CAwBcC,sBAAA;MA1BtBH,OAAA,EAAAC,QAAA,CAGY,MAsBQ,CAtBRC,YAAA,CAsBQE,gBAAA;QAtBDC,KAAK,EAAC;MAAQ;QAHjCL,OAAA,EAAAC,QAAA,CAIgB,MAOQ,CAPRC,YAAA,CAOQI,gBAAA;UAPDC,KAAK,EAAC;QAAsB;UAJnDP,OAAA,EAAAC,QAAA,CAKoB,MAKM,CALKO,KAAA,CAAAC,QAAQ,gB,cAAnBC,mBAAA,CAKM,OAV1BC,UAAA,GAOoBT,YAAA,CAA+CU,gBAAA;YAAvCC,EAAE,EAAE;cAAAC,IAAA;YAAA;UAAqB;YAPrDd,OAAA,EAAAC,QAAA,CAOuD,MAAI,CAP3Dc,gBAAA,CAOuD,MAAI,E;YAP3DC,CAAA;cAQoBd,YAAA,CAAkDU,gBAAA;YAA1CC,EAAE,EAAE;cAAAC,IAAA;YAAA;UAAwB;YARxDd,OAAA,EAAAC,QAAA,CAQ0D,MAAI,CAR9Dc,gBAAA,CAQ0D,MAAI,E;YAR9DC,CAAA;cASoBd,YAAA,CAA2DU,gBAAA;YAApDK,IAAI,EAAC;UAAa;YAT7CjB,OAAA,EAAAC,QAAA,CAS8C,MAAM,CATpDc,gBAAA,CAS8C,QAAM,GAAAG,gBAAA,CAAGV,KAAA,CAAAW,YAAY,IAAG,GAAC,K;YATvEH,CAAA;kBAAAI,mBAAA,W;UAAAJ,CAAA;YAYgBd,YAAA,CAGQI,gBAAA;UAHDC,KAAK,EAAC;QAAa;UAZ1CP,OAAA,EAAAC,QAAA,CAcoB,MAAyC,CAAzCC,YAAA,CAAyCU,gBAAA;YAAjCC,EAAE,EAAE;cAAAC,IAAA;YAAA;UAAU;YAd1Cd,OAAA,EAAAC,QAAA,CAc4C,MAAS,CAdrDc,gBAAA,CAc4C,WAAS,E;YAdrDC,CAAA;;UAAAA,CAAA;YAgBgBd,YAAA,CAQQI,gBAAA;UARDC,KAAK,EAAC;QAAoB;UAhBjDP,OAAA,EAAAC,QAAA,CAkBoB,MAAqF,CAAxEO,KAAA,CAAAa,OAAO,I,cAApBzB,YAAA,CAAqFgB,gBAAA;YAlBzGjB,GAAA;YAkB2CkB,EAAE,EAAE;cAAAC,IAAA;YAAA;;YAlB/Cd,OAAA,EAAAC,QAAA,CAkBqE,MAAK,CAlB1Ec,gBAAA,CAkBqE,OAAK,GAAAG,gBAAA,CAAGI,IAAA,CAAAC,gBAAgB,IAAG,GAAC,K;YAlBjGP,CAAA;gBAAAI,mBAAA,YAmBoBlB,YAAA,CAAgDU,gBAAA;YAAxCC,EAAE,EAAE;cAAAC,IAAA;YAAA;UAAsB;YAnBtDd,OAAA,EAAAC,QAAA,CAmBwD,MAAI,CAnB5Dc,gBAAA,CAmBwD,MAAI,E;YAnB5DC,CAAA;cAoBiCR,KAAA,CAAAa,OAAO,I,cAApBzB,YAAA,CAA0DgB,gBAAA;YApB9EjB,GAAA;YAoB2CkB,EAAE,EAAE;cAAAC,IAAA;YAAA;;YApB/Cd,OAAA,EAAAC,QAAA,CAoBiE,MAAK,CApBtEc,gBAAA,CAoBiE,OAAK,E;YApBtEC,CAAA;gBAAAI,mBAAA,Y,CAqBkCZ,KAAA,CAAAa,OAAO,I,cAArBzB,YAAA,CAAiEgB,gBAAA;YArBrFjB,GAAA;YAqB4CkB,EAAE,EAAE;cAAAC,IAAA;YAAA;;YArBhDd,OAAA,EAAAC,QAAA,CAqByE,MAAI,CArB7Ec,gBAAA,CAqByE,MAAI,E;YArB7EC,CAAA;gBAAAI,mBAAA,Y,CAsBkCZ,KAAA,CAAAa,OAAO,I,cAArBzB,YAAA,CAAwDgB,gBAAA;YAtB5EjB,GAAA;YAsB4CkB,EAAE,EAAE;cAAAC,IAAA;YAAA;;YAtBhDd,OAAA,EAAAC,QAAA,CAsBiE,MAAG,CAtBpEc,gBAAA,CAsBiE,KAAG,E;YAtBpEC,CAAA;gBAAAI,mBAAA,YAuBiCZ,KAAA,CAAAa,OAAO,I,cAApBzB,YAAA,CAAoDgB,gBAAA;YAvBxEjB,GAAA;YAuB2C6B,OAAK,EAAEC,QAAA,CAAAC;;YAvBlD1B,OAAA,EAAAC,QAAA,CAuB4D,MAAI,CAvBhEc,gBAAA,CAuB4D,MAAI,E;YAvBhEC,CAAA;gCAAAI,mBAAA,W;UAAAJ,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}